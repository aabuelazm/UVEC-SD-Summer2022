#pragma config(Sensor, dgtl1, button, sensorTouch)
#pragma config(Sensor, dgtl11, range, sensorSONAR_mm)
#pragma config(Motor, port1, drive1, tmotorVex393_HBridge, openLoop)
//#pragma config(Motor, port2, drive2, tmotorVex393_MC29, openLoop)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

#define WHEEL_SPEED 100
#define ARM_SPEED 100
#define CLAW_SPEED 100
#define CLAW_DISTANCE 20

enum SystemPhase {
	idle,
	moveFore//,
	// pickup,
	// moveBack,
	// egg
};
SystemPhase phase = idle;

task main() {
	while(true){
		switch (phase) {
			case idle:
				if (SensorValue[button]) {
					motor[drive1] = WHEEL_SPEED;
					++phase;
					delay(500);
				}
				break;

			case moveFore:
				if (SensorValue[range] <= CLAW_DISTANCE || SensorValue[button]) {
					motor[drive1] = 0;
					--phase;
					delay(500);
				}
				break;
		}
	}
}
